!function(t){function o(o){var e=isNaN(parseFloat(o.options.offset))?o.options.offset.call(o.target):o.options.offset;return o.target.offset().top-e-t("body").offset().top}function e(t,o){t===location.hash.replace("#","")||"page-top"===t&&""===location.hash.replace("#","")||setTimeout(function(){t=t?"page-top"===t?" ":"#"+t:" ",history&&history.replaceState&&history.replaceState({},"",t)},o||100)}function n(n){if(!l){l=!0;var i=o(n);t("html, body").animate({scrollTop:i},{easing:"linear",complete:function(){var i=o(n);t("html, body").animate({scrollTop:i},{easing:"linear",duration:100,complete:function(){l=!1,e(n.id,5)}})}})}}function i(o){var e=(o.attr("href")||"").split("#").pop(),n=function(t){var o=jQuery(t)[0].href||"",e="#";try{var n=new window.URL(o);e=[n.protocol,"//",n.host,n.pathname].join("")}catch(t){e=o.split("?")[0].split("#")[0]}return e}(o),i=null,r=[location.protocol,"//",location.host,location.pathname].join("");if(n.length&&n!==r)return i;if(e.trim().length)try{i=t('[id="'+e+'"]')}catch(t){console.log("error scrollSpy",t)}return i&&i.length?i:null}function r(){a.eachCategory(function(t){var o=t.sort(function(t,o){return t.target.offset().top-o.target.offset().top}),n=o.filter(function(t){return t.target.offset().top<=window.scrollY+.25*window.innerHeight}).pop();o.forEach(function(t){n&&t.element.is(n.element)?(e(t.id,5),t.options.onChange.call(t.element)):t.options.onLeave.call(t.element)})})}"#page-top"===window.location.hash&&e("",5);var a={items:{},eachCategory:function(t){for(var o in this.items)this.items.hasOwnProperty(o)&&t(this.items[o])},addItem:function(t,o){this.items[t]||(this.items[t]=[]),this.items[t].push(o)},all:function(){var t=[];for(var o in this.items)this.items.hasOwnProperty(o)&&(t=t.concat(this.items[o]));return t}},l=!1;t.fn.smoothScrollAnchor=function(o){var e=t(this);o=jQuery.extend({offset:0},o),e.each(function(){var e=t(this),r=o.target||i(e);if(r&&r.length){var a={element:e,options:o,target:r,targetSel:o.targetSel||'[id="'+r.attr("id").trim()+'"]',id:(r.attr("id")||"").trim()};e.off("click").on("click",function(t){t.preventDefault(),t.stopPropagation(),n(a)})}})},t.fn.scrollSpy=function(o){var e=t(this),n="spy-"+parseInt(Date.now()*Math.random());e.each(function(){var e=t(this);if(o=jQuery.extend({onChange:function(){},onLeave:function(){},smoothScrollAnchor:!1,offset:0},o),e.is("a")&&-1!==(e.attr("href")||"").indexOf("#")){var r=i(e);if(r){var l={element:e,options:o,target:r,targetSel:'[id="'+r.attr("id").trim()+'"]',id:r.attr("id").trim()};a.addItem(n,l),e.data("scrollSpy",l),o.smoothScrollAnchor&&e.smoothScrollAnchor({offset:o.offset})}}})},t(window).scroll(r),t(window).bind("smoothscroll.update",r),t(function(){var o=window.location.hash.replace("#",""),e=a.all().filter(function(t){return t.targetSel==='[id="'+o.trim()+'"]'});t(window).on("load",function(){e.length&&n(e[0]),r()})})}(jQuery);