!function(e){function n(n){n.find("[data-selected-item]").each(function(){e(this).removeAttr("data-selected-item");var t=n.children("ul");n.is(".mobile-menu")&&t.slideDown()})}function t(n,t){e("body").off("tap.navigation-clear-selection"),e(window).off("scroll.navigation-clear-selection"),n.is(t)||e.contains(t[0],this)||i(t)}function i(n,t){n.find("li.hover").each(function(){t&&function(e){return e.find("[data-selected-item]").length>0||e.is("[data-selected-item]")}(e(this))||e(this).removeClass("hover")})}function o(e,n){if(function(e,n){return n.parentsUntil("ul.dorpdown-menu").filter("li").length}(0,n)>0){var t=n.children("ul"),i=t.length&&n.offset().left+n.width()+300>window.innerWidth,o=t.length&&n.closest(".open-reverse").length;i||o?t.addClass("open-reverse"):t.length&&t.removeClass("open-reverse")}}function a(n){var t=n;e.fn.scrollSpy&&t.find("a").scrollSpy({onChange:function(){t.find(".current-menu-item,.current_page_item").removeClass("current-menu-item current_page_item"),e(this).closest("li").addClass("current-menu-item")},onLeave:function(){e(this).closest("li").removeClass("current-menu-item current_page_item")},smoothScrollAnchor:!0,offset:function(){var n=e(".navigation-bar.fixto-fixed");return n.length?n[0].getBoundingClientRect().height:0}}),e(window).trigger("smoothscroll.update")}e.event.special.tap||(e.event.special.tap={setup:function(n,t){e(this).bind("touchstart",e.event.special.tap.handler).bind("touchmove",e.event.special.tap.handler).bind("touchend",e.event.special.tap.handler)},teardown:function(n){e(this).unbind("touchstart",e.event.special.tap.handler).unbind("touchmove",e.event.special.tap.handler).unbind("touchend",e.event.special.tap.handler)},handler:function(n){var t=e(this);t.data(n.type,1),"touchend"!==n.type||t.data("touchmove")?t.data("touchend")&&t.removeData("touchstart touchmove touchend"):(n.type="tap",e.event.handle.apply(this,arguments))}}),e("ul.dropdown-menu").each(function(){var s=e(this);if(s.hasClass("mobile-menu")){var r=e('<a href="#" data-menu-toggler="">Menu</a>');s.before(r),r.click(function(){r.hasClass("opened")?(s.slideUp(300,function(){s.css("display","")}),s.removeClass("mobile-menu"),r.removeClass("opened")):(r.addClass("opened"),s.slideDown(),s.addClass("mobile-menu"),i(s),n(s))})}e("");s.on("tap.navigation","li.menu-item > a",function(a){var r=e(this),l=r.parent();if(l.children("ul").length)if(function(e){return e.is("[data-selected-item]")}(l)){var c=r.attr("href");if(0===c.indexOf("#")){var u=c.replace("#","").trim();if(!u||!e("#"+u).length)return}n(s)}else!function(a,s){n(a),s.attr("data-selected-item",!0),i(a,s),s.addClass("hover"),o(0,s),e("body").on("tap.navigation-clear-selection","*",function(){t(jQuery(this),a)}),e(window).on("scroll.navigation-clear-selection",function(){t(jQuery(this),a)})}(s,l),a.preventDefault(),a.stopPropagation();else n(s)}),s.on("mouseover.navigation","li",function(){s.find("li.hover").removeClass("hover"),o(0,e(this))}),a(s)}),e(function(){window.wp&&window.wp.customize&&(jQuery(".offcanvas_menu").find("li > ul").eq(0).each(function(){jQuery(this).show(),jQuery(this).parent().addClass("open")}),window.wp.customize.selectiveRefresh.bind("render-partials-response",function(n){Object.getOwnPropertyNames(n.contents).filter(function(e){return-1!==e.indexOf("nav_menu_instance[")}).length&&setTimeout(function(){e("ul.dropdown-menu").each(function(){a(e(this))})},1e3)}))})}(jQuery);